!function i(n,d,c){function l(t,r){if(!d[t]){if(!n[t]){var e="function"==typeof require&&require;if(!r&&e)return e(t,!0);if(s)return s(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var o=d[t]={exports:{}};n[t][0].call(o.exports,function(r){return l(n[t][1][r]||r)},o,o.exports,i,n,d,c)}return d[t].exports}for(var s="function"==typeof require&&require,r=0;r<c.length;r++)l(c[r]);return l}({1:[function(r,t,e){"use strict";r("primo-explore-lod-author-card");var a=angular.module("viewCustom",["angularLoad","lodAuthorCard"]);a.component("prmExploreMainAfter",{bindings:{parentCtrl:"<"},controller:function(){this.parentCtrl.searchService.cheetah.configurationUtil.searchStateService.resultsBulkSize=50}}),a.component("prmServiceDetailsAfter",{bindings:{parentCtrl:"<"},template:'<lod-author-card-component parent-ctrl="$ctrl.parentCtrl"></lod-author-card-component>'})},{"primo-explore-lod-author-card":2}],2:[function(r,t,e){r("./js/lod-author-card.module.js"),t.exports="lodAuthorCard"},{"./js/lod-author-card.module.js":3}],3:[function(r,t,e){angular.module("lodAuthorCard",[]).filter("escape",function(){return window.encodeURIComponent}).filter("secureSrc",function(){return function(r){return r.substr(r.indexOf(":")+1)}}).constant("lodAuthorCardOptions",{bibcardApi:"https://api.exldevnetwork.net/bibcard/?uri="}).controller("LodAuthorCardComponentController",["$http","$scope","lodAuthorCardOptions",function(t,e,a){var r=this,o=/https?:\/\/id\.loc\.gov\//,i=r.parentCtrl.item.pnx.display.mms[0],n=r.parentCtrl.configurationUtil.vid.split(":")[0];r.searchUrl="/discovery/search?vid="+r.parentCtrl.configurationUtil.vid;var d="https://open-na.hosted.exlibrisgroup.com/alma/"+n+"/bibs/"+i;e.loading=!0,t.get(d).then(function(r){var t,e=r.data;if(Array.isArray(e.creator)?t=e.creator.find(function(r){return r["@id"]&&r["@id"].match(o)}):e.creator["@id"]&&e.creator["@id"].match(o)&&(t=e.creator),t)return t["@id"];throw"No LC Names URI found"}).then(function(r){return t.get(a.bibcardApi+r)}).then(function(r){e.bibcard=r.data}).catch(function(r){console.warn(r)}).finally(function(){e.loading=!1})}]).component("lodAuthorCardComponent",{bindings:{parentCtrl:"<"},controller:"LodAuthorCardComponentController",template:'    <div class="lod-author-card">      <div class="section-header" layout="row" layout-align="center center">        <h2 class="section-title md-title light-text">          More information about the author        </h2>        <md-divider flex></md-divider>      </div>      <div class="section-body" layout="row">        <div ng-if="!loading">          <span ng-if="!bibcard">No further information is available for this author</span>          <md-card ng-if="bibcard">            <md-card-title>              <md-card-title-text>                <span class="md-headline">{{bibcard.name}}</span>                <span class="md-subhead">{{bibcard.wikidata_entity.description}}                  ({{bibcard.birth_date | date:\'mediumDate\'}}-{{bibcard.death_date | date:\'mediumDate\'}})</span>              </md-card-title-text>            </md-card-title>            <md-card-content>              <div layout="row" layout-xs="column">                <div flex="" class="lod-author-card-abstract">                  {{bibcard.dbpedia_resource.abstract}}                </div>                <div flex="33">                  <img ng-src="{{bibcard.dbpedia_resource.depiction|secureSrc}}" style="width: 100%">                </div>              </div>              <div ng-if="bibcard.wikidata_entity.notable_works && bibcard.wikidata_entity.notable_works.length>0">                <span class="md-subhead">Notable works</span>                <ul>                  <li ng-repeat="work in bibcard.wikidata_entity.notable_works">                    <a ng-href="{{$ctrl.searchUrl + \'&query=title,contains,\' + (work | escape)}}"                      target="_blank">{{work}}</a>                  </li>                </ul>              </div>            </md-card-content>          </md-card>        </div>        <md-progress-circular ng-if="loading" md-mode="indeterminate"></md-progress-circular>      </div>    </div>  '})},{}]},{},[1]);
//# sourceMappingURL=custom.js.map
